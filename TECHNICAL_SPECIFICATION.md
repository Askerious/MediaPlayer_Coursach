# Техническое задание: Музыкальный плеер
**Студент:** Михайлов Константин Викторович
**Группа:** 2407сб2

---
## 1. Описание проекта
### 1.1 Название системы 
Система управления медиатекой
### 1.2 Назначение 
Система предназначена для организации медиатеки. Позволяет воспроизводить аудиофайлы, пополнять медиатеку, создавать плейлисты, 

---
## 2. Функциональные требования
### 2.1 Основные функции системы
#### Функция 1: Проигрывание аудиофайлов
- **Описание:** Пользователь выбирает аудиофайл из списка. Система воспроизводит аудио из выбранного аудиовыход
- **Входные данные:** Пользователь кликает по файлу из списка
- **Результат:** Воспроизведение аудиофайла
#### Функция 2: Импорт аудиофайлов в медиатеку
- **Описание:** Пользователь через диалоговое окно выбирает файл/папку с аудиофайлами. Система проходит по всем вложенным папкам и добавляет все найденные файлы в общую медиатеку
- **Входные данные:** Путь до папки/файла
- **Результат:** Все найденные файлы добавлены в общую медиатеку
#### Функция 2: Импорт альбома в медиатеку
- **Описание:** Пользователь через диалоговое окно выбирает папку (Строго без вложенных папок) с аудиофайлами. Система проходит по папке и добавляет все найденные файлы в новый плейлист
- **Входные данные:** Путь до папки/файла
- **Результат:** Все найденные файлы добавлены в общую медиатеку
#### Функция 3: Управление плейлистом
- **Описание:** Пользователь может добавить/удалить плейлист. В плейлист либо добавлять треки из медиатеки, либо удалять из него треки
- **Входные данные:** Название нового плейлиста в случае создания, состав из выбранных треков из общей медиатеки плейлиста. В случае удаление выбранный плейлист/трек в плейлисте
- **Результат:** TODO
#### Функция 4: Добавление в избранное
- **Описание:** Пользователь может добавить любой трек в изначально созданный плейлист "Избранное" по одной кнопке.
- **Входные данные:** Пользователь нажимает на кнопку выбранного трека
- **Результат:** Трек добавлен в плейлист
#### Функция 5: Просмотр плейлистов
- **Описание:** Пользователь может просмотреть все созданные плейлисты в нажав на кнопку "Плейлисты"
- **Входные данные:** Пользователь нажимает на кнопку "Плейлисты"
- **Результат:** Главное окно заменяется на окно с плейлистами
#### Функция 6: Оплата
- **Описание:** Пользователь может оплатить подписку по выбранному тарифу, введя данные банковской карты. Система проверяет корректность данных, создает запись о платеже и, при успешной оплате, автоматически продлевает срок подписки
- **Входные данные:** Тариф, данные карты
- **Результат:** Платеж обработан, подписка продлена, создана запись в БД

---
## 3. Структура базы данных
### Таблица 1: Track
**Описание:** Хранит информацию о треке
**Поля:**
- `Id` (int, PK)
- `Title` (string)
- `Duration` (int)
- `isFavorite` (bool) 
- `Path` (string)
**Связи:**
- Один-ко-многим с таблицей PlaylistTracks 

### Таблица 2: Playlist
**Поля:**
- `Id` (int, PK)
- `Name` (string)
- ``
**Связи:**
- Один-ко-многим с таблицей PlaylistTracks

### Таблица 3: PlaylistTracks
**Поля:**
- `Id` (int, PK)
- `PlaylistId` (int, FK -> `Playlist.Id`) 
- `TrackId` (int, FK -> `Track.Id`)
**Связи:**
- FK `PlaylistId` -> `Playlist.Id`
- FK `TrackId` -> `Track.Id`

### Таблица 4: User
**Поля:**
- `Id` (int, PK)
- `Username` (string)
- `Password` (string)
**Связи:**
- Один-ко-многим с таблицей Payment

### Таблица 5: Payment
**Поля:**
- `Id` (int, PK)
- `UserId` (int, FK -> `User.Id`)
- `Tarrif` (string)
- `CreatedAt`(DateTime)
**Связи:**
- FK `UserId` -> `User.Id`

--- 
## 4. Основные формы приложения
#### Форма 1: MainWindow

**Назначение:** Главная форма приложения для управления медиатекой

**Элементы управления:**
- ToolBar `Menu` — Кнопки: `Импорт`, `Импорт Альбома`, `Плейлисты`
- DataGrid `Tracks` — Колонки: `Название`, `Продолжительность`,  `Избранное` (Кнопка)
- UserControl - Плеер (Пауза, следующий/предыдущий трек, ползунок, громкость)

**Действия:**
- Двойной клик по треку — Проигрывание трека
- Кнопка "Импорт" — Открывает `ImportWindow`
- Кнопка "Импорт Альбома" — Открывает `ImportAlbumWindow`
- Кнопка "Плейлисты" — Открывает `PlaylistsWindow`

#### Форма 2: ImportWindow
**Назначение:** Импорт файла/папки рекурсивно в медиатеку

**Элементы управления:**
- TextBox `PathToFile` — Путь до файла/папки
- Button `BrowseButton`
- Button `ImportButton`

**Действия:**
- Кнопка "Импорт" — Запускает функцию импорта
- Кнопка "Обзор" —  Выбор файла/папки

#### Форма 3: ImportAlbumWindow
**Назначение:** Импорт папки в медиатеку как плейлист

**Элементы управления:**
- TextBox `PathToFile` — Путь до папки
- TextBox `PlaylistName` — Имя плейлиста
- Button `BrowseButton`
- Button `ImportButton`

**Действия:**
- Кнопка "Импорт" — Запускает функцию импорта
- Кнопка "Обзор" —  Выбор файла/папки

#### Форма 4: PlaylistsWindow
**Назначение:** Просмотр и управление плейлистами

**Элементы управления:**
- ListBox `PlaylistsList`
- DataGrid `PlaylistTrackGrid`
- Button `CreatePlaylist`
- Button `DeletePlaylist`
- Button `ChangePlaylist`
- Button `AddToPlaylist`

**Действия:**
- Кнопка "Создать плейлист" — Запускает функцию создания 
- Кнопка "Обзор" —  Выбор файла/папки